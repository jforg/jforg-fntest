<!DOCTYPE html>
<meta charset="UTF-8">
<meta name="color-scheme" content="light dark">
<meta name="viewport" content="width=device-width">
<title>Netlify functions test: Get Amazon Sale</title>
<style>
:root {
  font-family: system-ui, sans-serif;
  line-height: 1.5;
}
button {
  font-size: 100%;
  line-height: inherit;
}
</style>
<p><button>Get Amazon Sale</button></p>
<p><output>â€¦</output></p>
<script>
const btn = document.querySelector('button')
btn.addEventListener('click', async () => {
  const output = document.querySelector('output')
  const endPoint = '/.netlify/functions/amazon-sale'
  const response = await fetch(endPoint)
  const data = await response.json()

  if (data.totalCount > 0) {
    const content = data.contents[0]
    output.textContent = content.copy
  } else {
    output.textContent = 'No sale found'
  }
})
</script>
